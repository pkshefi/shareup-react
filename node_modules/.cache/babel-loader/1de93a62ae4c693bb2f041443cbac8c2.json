{"ast":null,"code":"var _jsxFileName = \"/Users/mohammedshafeeq/Downloads/Shareup-Project-main/Shareup-react/shareup-react/src/components/Stories/StoriesComponent.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect, useContext } from 'react';\nimport { Redirect, useHistory } from \"react-router-dom\";\nimport Button from 'react-bootstrap/Button';\nimport Form from 'react-bootstrap/Form';\nimport UserService from '../../services/UserService';\nimport UserContext from '../../contexts/UserContext';\nimport AuthService from '../../services/auth.services';\nimport SimpleReactLightbox from 'simple-react-lightbox';\nimport { testScript } from '../../js/script';\nimport GroupService from '../../services/GroupService';\nimport StoriesService from '../../services/StoriesService';\nimport Carousel from 'react-bootstrap/Carousel';\nimport Modal from 'react-modal';\nimport Popup from 'reactjs-popup';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction StoriesComponent({\n  story,\n  setRefresh\n}) {\n  _s();\n\n  let history = useHistory();\n  const {\n    user\n  } = useContext(UserContext); // const []\n  // const inputRef = createRef();\n\n  const [index, setIndex] = useState(0);\n  const [storiesForUser, setStoriesForUser] = useState([]);\n  const [stories, setStories] = useState([]);\n  const [userR, setUserR] = useState([]);\n\n  const handleSelect = (selectedIndex, e) => {\n    setIndex(selectedIndex);\n  };\n\n  const getStoriesForUser = async () => {\n    await StoriesService.getStoriesForUser(AuthService.getCurrentUser().username).then(res => {\n      const sorting = res.data.sort(function (a, b) {\n        let dateA = new Date(a.date),\n            dateB = new Date(b.date);\n        return dateB - dateA;\n      });\n      const uniqueStories = Array.from(new Set(sorting.map(a => a.id))).map(id => {\n        return res.data.find(a => a.id === id);\n      });\n      setStoriesForUser(uniqueStories);\n    });\n  };\n\n  const getUser = async () => {\n    if (user === null) {\n      console.log(\"RUNNING\");\n      await UserService.getUserByEmail(AuthService.getCurrentUser().username).then(res => {\n        setUserR(res.data);\n      });\n    } else {\n      console.log(\"WALKING\" + JSON.stringify(user));\n      setUserR(user);\n    }\n  };\n\n  useEffect(() => {\n    getUser();\n    getStoriesForUser();\n    testScript();\n  }, [stories]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"strysggstion-card\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"strysggstion-Profimg\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: story.user.profilePicturePath,\n        alt: \"\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 41\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 3\n    }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n      href: \"#\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"strysggstion-imgStry\",\n        children: /*#__PURE__*/_jsxDEV(\"a\", {\n          href: \"#!\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: story.storiesImagePath,\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 54\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 79,\n          columnNumber: 41\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 3\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 3\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 3\n  }, this);\n}\n\n_s(StoriesComponent, \"Gwn2L7+TH9XoEsQQUhtitZN3Dgc=\", false, function () {\n  return [useHistory];\n});\n\n_c = StoriesComponent;\nexport default StoriesComponent;\n\nvar _c;\n\n$RefreshReg$(_c, \"StoriesComponent\");","map":{"version":3,"sources":["/Users/mohammedshafeeq/Downloads/Shareup-Project-main/Shareup-react/shareup-react/src/components/Stories/StoriesComponent.jsx"],"names":["React","useState","useEffect","useContext","Redirect","useHistory","Button","Form","UserService","UserContext","AuthService","SimpleReactLightbox","testScript","GroupService","StoriesService","Carousel","Modal","Popup","StoriesComponent","story","setRefresh","history","user","index","setIndex","storiesForUser","setStoriesForUser","stories","setStories","userR","setUserR","handleSelect","selectedIndex","e","getStoriesForUser","getCurrentUser","username","then","res","sorting","data","sort","a","b","dateA","Date","date","dateB","uniqueStories","Array","from","Set","map","id","find","getUser","console","log","getUserByEmail","JSON","stringify","profilePicturePath","storiesImagePath"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react';\r\nimport { Redirect, useHistory } from \"react-router-dom\";\r\nimport Button from 'react-bootstrap/Button';\r\nimport Form from 'react-bootstrap/Form';\r\nimport UserService from '../../services/UserService';\r\nimport UserContext from '../../contexts/UserContext';\r\nimport AuthService from '../../services/auth.services';\r\nimport SimpleReactLightbox from 'simple-react-lightbox'\r\nimport { testScript } from '../../js/script';\r\nimport GroupService from '../../services/GroupService';\r\nimport StoriesService from '../../services/StoriesService';\r\nimport Carousel from 'react-bootstrap/Carousel'\r\n\r\n\r\n\r\nimport Modal from 'react-modal';\r\nimport Popup from 'reactjs-popup';\r\nfunction StoriesComponent({ story, setRefresh }) {\r\n    \r\n\r\n    let history = useHistory();\r\n  \r\n    const { user } = useContext(UserContext)\r\n  \r\n    // const []\r\n  \r\n    // const inputRef = createRef();\r\n  \r\n    \r\n   \r\n    const [index, setIndex] = useState(0);\r\n    const [storiesForUser, setStoriesForUser] = useState([]);\r\n    const [stories, setStories] = useState([]);\r\n    const [userR, setUserR] = useState([]);\r\n\r\n    const handleSelect = (selectedIndex, e) => {\r\n      setIndex(selectedIndex);\r\n    };\r\n   \r\n    const getStoriesForUser = async () => {\r\n      await StoriesService.getStoriesForUser(AuthService.getCurrentUser().username).then(res => {\r\n        const sorting = res.data.sort(function(a, b) {\r\n          let dateA = new Date(a.date), dateB = new Date(b.date);\r\n          return dateB - dateA;\r\n      });\r\n        const uniqueStories = Array.from(new Set(sorting.map(a => a.id)))\r\n          .map(id => {\r\n            return res.data.find(a => a.id === id)\r\n          })\r\n        setStoriesForUser(uniqueStories)\r\n      })\r\n    }\r\n    const getUser = async () => {\r\n      if (user === null) {\r\n        console.log(\"RUNNING\")\r\n        await UserService.getUserByEmail(AuthService.getCurrentUser().username).then(res => {\r\n          setUserR(res.data);\r\n        })\r\n      } else {\r\n        console.log(\"WALKING\" + JSON.stringify(user))\r\n        setUserR(user)\r\n      }\r\n    }\r\n      \r\n    useEffect(() => {\r\n      getUser()\r\n      getStoriesForUser()\r\n      testScript()\r\n    }, [stories])\r\n      \r\n      \r\n    \r\nreturn(\r\n  \r\n  <div className=\"strysggstion-card\">\r\n  <div className=\"strysggstion-Profimg\"><img src={story.user.profilePicturePath} alt=\"\" /></div>\r\n  <a href=\"#\">\r\n   {/* {story.storiesImagePath} data-lightbox={`image-user-${story.user.id}`} */}\r\n  <div className=\"strysggstion-imgStry\"><a href=\"#!\"><img src={story.storiesImagePath} alt=\"\" /></a></div>\r\n  </a>\r\n  \r\n</div>\r\n\r\n        \r\n       \r\n\r\n\t\r\n)\r\n\r\n\r\n}\r\nexport default StoriesComponent;"]},"metadata":{},"sourceType":"module"}